# MatchMaking
  “Damn!”骂骂咧咧走过来了一个策划：“为什么我星耀匹配到了无双王者啊！”
  “傻X策划，怎么又给匹人机”
  “怎么把把都有莫名其妙开摆的脑摊！这匹配机制我服了”
  “多数几把就进人机局了，服了”
  “组排排不了组排给我排AI是吧”
  “卧槽，我们这边的人机怎么这么菜，怎么送了这么多”
  “我XX赛季王者，这赛季怎么上起来这么艰难啊，没把都有菜b”
  “卧槽怎么匹配了这么久啊，这游戏是要死了吗”‘’
  “*******” * 10086
WoW，喷的好，喷到点子上了，所以解决方案呢？
首先最重要的,在99%的游戏中，寻找绝对公平的对局都是极其困难的

## Impossible trinity
让我们先来说说原本匹配的不可能三角吧
* 匹配时间：玩家等待时间
* 匹配人数：同时在线且正在匹配的人数(这里一般指人数不多的情况，超大PCU勿扰！！！）
* 匹配质量：该局的对局平衡(主要指段位,elo,mmr,trueskill等)

一般来说，匹配人数不多的情况下，匹配时间和匹配质量 是几乎不可能同时存在的。
段位越多模式越多，匹配分池就越多，规则越多，限制越多，最终就越难调整

*** 举一个简单的例子，设一个有100w活跃玩家，ACU假设有10万
双模式参与率大概55开，则人多的模式8万同时进入匹配队列
然后就开始分到段位里面了，分成几个排位池子，高段位/中高段位/中端位/低段位/连败局队列/回流局队列
那么拆到细节的某一个队列中，匹配的人数可能就有不足1万人了。然后我们继续拆，如果我们在加上elo的限制
elo再次分池，比如我elo1400不能匹配到1800以上的，那么最终某一个特定池子的人数就会变得极少，
甚至会经常出现你匹配到同一个人，成局要求的人数越多，这个问题越严重
上面只是一个很普通很正常的排位系统
but
上述的段位分段实际可能有十几个/上述的elo分段也可能很多
然后在多加一些限制那会怎么样
比如，
  剧本局1
  剧本局2
  剧本局3
  .....
  剧本局x
拥有改剧本对局的玩家只能匹配到一样的有这个剧本局的玩家。
再加一点
比如，
  玩家tag1 -> 优先匹玩家tag2
  玩家tag2 -> 优先匹玩家tagx
  玩家tag3 -> 优先匹玩家tagN
再加一点
比如，
  防止某些玩家同时点击匹配排一起
再加一点
比如，
  ABtest几个匹配策略
***

  

  





